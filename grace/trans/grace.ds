module trans/grace

imports
  trans/semantics/semantics

signature
  arrows
    Program -init-> (V * Exn * H)
  
rules

  p@Program(_) -init-> (v_out, EX, H)
  where
    ProgPath native-term-origin-path(p), O bogus-addr(), S bogus-addr() |- p :: H {},
      VH {}, DCache {}, ICache {}, EX Ok() --> v :: H, VH, EX;
    case EX of {
      Ok() =>
        v => v_out
      otherwise =>
        halt-error("Unhandled exception: " ++ str(EX)) --> _;
        DoneV() => v_out
    }.
