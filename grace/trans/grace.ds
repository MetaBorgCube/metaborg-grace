module trans/grace

imports
  trans/semantics/semantics

signature
  arrows
    Program -init-> (V * Exn * H)

rules

  p@Program(_, _) -init-> (v_out, EX, H)
    where
      next() --> base;
      R No-Return(), O base, S base, M [] : List(String), P Exec() |- p :: H {}, L {}, VH {}, D {}, I {}, EX Ok() --> v :: H, L, VH, EX;
      case EX of {
        Ok() =>
          v => v_out
        otherwise =>
          DoneV() => v_out
      }.
